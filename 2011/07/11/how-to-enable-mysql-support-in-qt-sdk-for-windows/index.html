<!doctype html><html lang=en><head><title>How to enable MySQL Support in Qt SDK for Windows :: Amree Zaid</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="It has been quite a while since I wrote the previous guide. Since that particular post gained a lot of visitors, I decided to write a new guide based on the new Qt SDK and MySQL so that it will help people with new version for both softwares.
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://amree.github.io/2011/07/11/how-to-enable-mysql-support-in-qt-sdk-for-windows/><link rel=stylesheet href=https://amree.github.io/assets/style.css><link rel=stylesheet href=https://amree.github.io/assets/green.css><link rel=apple-touch-icon href=https://amree.github.io/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=https://amree.github.io/img/favicon/green.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="How to enable MySQL Support in Qt SDK for Windows"><meta property="og:description" content="It has been quite a while since I wrote the previous guide. Since that particular post gained a lot of visitors, I decided to write a new guide based on the new Qt SDK and MySQL so that it will help people with new version for both softwares.
"><meta property="og:url" content="https://amree.github.io/2011/07/11/how-to-enable-mysql-support-in-qt-sdk-for-windows/"><meta property="og:site_name" content="Amree Zaid"><meta property="og:image" content="https://amree.github.io/img/favicon/green.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2011-07-11 00:00:00 +0000 UTC"></head><body class=green><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Amree Zaid</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/all-posts>All Posts</a></li><li><a href=https://twitter.com/AmreeZaid>Twitter</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/all-posts>All Posts</a></li><li><a href=https://twitter.com/AmreeZaid>Twitter</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://amree.github.io/2011/07/11/how-to-enable-mysql-support-in-qt-sdk-for-windows/>How to enable MySQL Support in Qt SDK for Windows</a></h1><div class=post-meta><span class=post-date>2011-07-11</span></div><span class=post-tags>#<a href=https://amree.github.io/tags/windows/>windows</a>&nbsp;
#<a href=https://amree.github.io/tags/qt/>qt</a>&nbsp;
#<a href=https://amree.github.io/tags/mysql/>mysql</a>&nbsp;</span><div class=post-content><div><p>It has been quite a while since I wrote the previous guide. Since that
particular post gained a lot of visitors, I decided to write a new guide based
on the new Qt SDK and MySQL so that it will help people with new version for
both softwares.</p><p>Download Qt SDK and install it. In my case, I installed it at <code>C:\QtSDK</code>. You
must make sure that you’ve chosen to install Qt Sources. If you have Qt SDK
installed but you haven’t install Qt sources, just go to this path to install
it.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>Start &gt; All Programs &gt; Qt SDK &gt; Maintain Qt SDK
</code></pre></div><p><img src=/images/posts/2011-07-11-qt.png alt=image></p><p>Download MySQL and install it. In my case, I choose to install it at:</p><p>C:\Program Files (x86)\MySQL\MySQL Server 5.5.</p><p>You don’t need to install everything if you want to compile the plugin. Make
sure you will at least choose to install Client C API Library.</p><p><img src=/images/posts/2011-07-11-mysql.png alt=image></p><p>Open:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>Start &gt; All Programs &gt; Qt SDK &gt; Desktop &gt; Qt 4.7.3 for Desktop (MingW)**
</code></pre></div><p>Run these commands (change according to your environment):</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=color:#66d9ef>set</span> mysql=C:\PROGRA~2\MySQL\MYSQLS~1.5
<span style=color:#66d9ef>cd</span> \
<span style=color:#66d9ef>cd</span> QtSDK\QtSources\4.7.3\src\plugins\sqldrivers\mysql\

qmake <span style=color:#e6db74>&#34;INCLUDEPATH+=</span>%mysql%<span style=color:#e6db74>\include&#34;</span> <span style=color:#e6db74>&#34;LIBS+=</span>%mysql%<span style=color:#e6db74>\lib\libmysql.lib&#34;</span> -o Makefile mysql.pro
mingw32-make

qmake <span style=color:#e6db74>&#34;INCLUDEPATH+=</span>%mysql%<span style=color:#e6db74>\include&#34;</span> <span style=color:#e6db74>&#34;LIBS+=</span>%mysql%<span style=color:#e6db74>\lib\libmysql.lib&#34;</span> -o Makefile mysql.pro <span style=color:#e6db74>&#34;CONFIG+=release&#34;</span>
mingw32-make
</code></pre></div><p>You should be able to run these commands <strong>without any error</strong>.</p><p>You’ll find two directories (<strong>debug</strong> and <strong>release</strong>) created in the current
directory.</p><p>In <strong>debug</strong> directory, you’ll find <code>libqsqlmysqld4.a</code> and <code>qsqlmysqld4.dll</code>.</p><p>Meanwhile, in <strong>release</strong> directory, you’ll find <code>libqsqlmysql4.a</code> and
<code>qsqlmysql4.dll</code>.</p><p><strong>Copy all these 4 files into</strong>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>C:\QtSDK\Desktop\Qt\4.7.3\mingw\plugins\sqldrivers
</code></pre></div><p>Copy <code>libmysql.dll</code> (found in your MySQL installation directory) into C:\Windows.</p><p>Create new project and put these codes to test your new plugin</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;QApplication&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;QtSql&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>(<span style=color:#66d9ef>int</span> argc, <span style=color:#66d9ef>char</span> <span style=color:#f92672>*</span>argv[])
{
  QCoreApplication a(argc, argv);
  qDebug() <span style=color:#f92672>&lt;&lt;</span> QSqlDatabase<span style=color:#f92672>::</span>drivers();
  <span style=color:#66d9ef>return</span> a.exec();
}
</code></pre></div><p>Make sure you have QtSql Module in your project configuration file (.pro file)</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>QT += sql
</code></pre></div><p>You’ll get these outputs showing that your Qt has supports for MySQL:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>(&#34;QSQLITE&#34;, &#34;QMYSQL3&#34;, &#34;QMYSQL&#34;, &#34;QODBC3&#34;, &#34;QODBC&#34;)
</code></pre></div><p>Things to watch out for:</p><ol><li><p><strong>You can’t use MySQL 64 Bit (at the moment)</strong> to compile the plugin.</p></li><li><p>Make sure you’ll <strong>use short path</strong> type if you’ve installed MySQL into directory’s name containing spaces.</p></li><li><p><strong>Load sql module</strong> in your .pro file.</p></li></ol><p>Tested on:</p><ul><li>11/7/2011 – Windows 64 Bit, MySQL Server 5.5.1 32 Bit (Community Version) and Qt 4.7.3.</li></ul></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://amree.github.io/2011/07/12/husm-at-malaysia-open-source-conference-2011/><span class=button__icon>←</span>
<span class=button__text>HUSM at Malaysia Open Source Conference 2011</span></a></span>
<span class="button next"><a href=https://amree.github.io/2011/07/09/a-simple-working-example-for-qt-ncreport/><span class=button__text>A Simple Working Example for Qt NCReport</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2021 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://amree.github.io/assets/main.js></script><script src=https://amree.github.io/assets/prism.js></script></div></body></html>