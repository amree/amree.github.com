<!doctype html><html lang=en><head><title>Speed Up Ruby on Rails Development Environment :: Amree Zaid</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="There will be a time when your Rails development environment started to become very slow due to multiple reasons, but mostly because your codebase is very big and the monolith architecture is just too sweet for you to pass on.
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://amree.github.io/2021/05/09/speed-up-ruby-on-rails-development-environment/><link rel=stylesheet href=https://amree.github.io/assets/style.css><link rel=stylesheet href=https://amree.github.io/assets/green.css><link rel=apple-touch-icon href=https://amree.github.io/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=https://amree.github.io/img/favicon/green.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Speed Up Ruby on Rails Development Environment"><meta property="og:description" content="There will be a time when your Rails development environment started to become very slow due to multiple reasons, but mostly because your codebase is very big and the monolith architecture is just too sweet for you to pass on.
"><meta property="og:url" content="https://amree.github.io/2021/05/09/speed-up-ruby-on-rails-development-environment/"><meta property="og:site_name" content="Amree Zaid"><meta property="og:image" content="https://amree.github.io/img/favicon/green.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2021-05-09 00:00:00 +0000 UTC"></head><body class=green><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Amree Zaid</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/all-posts>All Posts</a></li><li><a href=https://twitter.com/AmreeZaid>Twitter</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/all-posts>All Posts</a></li><li><a href=https://twitter.com/AmreeZaid>Twitter</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://amree.github.io/2021/05/09/speed-up-ruby-on-rails-development-environment/>Speed Up Ruby on Rails Development Environment</a></h1><div class=post-meta><span class=post-date>2021-05-09</span></div><span class=post-tags>#<a href=https://amree.github.io/tags/ruby/>ruby</a>&nbsp;</span><div class=post-content><div><p>There will be a time when your Rails development environment started to become
very slow due to multiple reasons, but mostly because your codebase is very big
and the monolith architecture is just too sweet for you to pass on.</p><p>An example of this is you have to wait like 10 seconds (or worse) when you
change something in your Rails code and hit that refresh button. Normally,
starting Rails console/server also can be affected.</p><p>What works for me might not work for you, but it should help you to get started.
BTW, I&rsquo;m optimizing 7 years old codebase. So here are some tips for speed
improvements.</p><p>Get a baseline first on how slow it is so that you know you are actually
improving it instead of just using your feeling:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>time bundle exec rake environment
</code></pre></div><p>This should show you the load time without spring. Any changes we make should
make the numbers better than before. Alright, now we need to identify what&rsquo;s
causing the slowness. We can use
<a href=https://github.com/nevir/Bumbler>https://github.com/nevir/Bumbler</a> gem for
this. Just run this command first:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>bumbler
</code></pre></div><p>It will show you gems that are taking time to be loaded/require.</p><p>But what can you do with that output? Start from the bottom and see if you put
your gem in the right development. You don&rsquo;t have to put your server monitoring
gem in the development environment, right?</p><p>You can also do <code>require: false</code> in your Gemfile for certain gems that are being
used rarely, but you need to <code>require</code> it manually when you want to use it.</p><p>Use your judgment wisely. Check out how
<a href=https://github.com/discourse/discourse/blob/master/Gemfile>https://github.com/discourse/discourse/blob/master/Gemfile</a>
is doing it</p><p>Next, run:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>bumbler --initializers
</code></pre></div><p>This will show you the load time of initializers.</p><p>In my case, it was the routes (we have thousands of routes due to our support of
multiple languages). So, reducing the routes will help but we can&rsquo;t remove the
routes, it&rsquo;s one of our best features.</p><p>Since you won&rsquo;t always be using ALL of them in the development, so you can do
this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>config<span style=color:#f92672>.</span>i8n<span style=color:#f92672>.</span>available_locales <span style=color:#f92672>=</span> <span style=color:#f92672>[</span><span style=color:#e6db74>:en</span><span style=color:#f92672>]</span> <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>ENV</span><span style=color:#f92672>.</span>fetch(<span style=color:#e6db74>&#34;MIN_LOCALE&#34;</span>, <span style=color:#e6db74>&#34;0&#34;</span>) <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;1&#34;</span>
</code></pre></div><p>What does it do? By default, it will use all of the languages except when you
have that <code>MIN_LOCALE</code> environment variable which you would only put in your
local development.</p><p>Another place to check would be your Admin routes. Again, you are not accessing
your Admin routes all the time, so, you can use the same trick in your
<code>routes.rb</code>. Try optimizing your codebase based on what bumbler told you.</p><p>One last tip would be to do some cleanup on your gems. Remove gems that are not
being used. Sometimes we just forgot that we don&rsquo;t need it anymore.</p><p>That&rsquo;s it, folks. Here is my result from this exercise:</p><ul><li>Reduce slow requires by 41%</li><li>Reduce Initialize require by 72%</li><li>Reduce the number of routes by 91%</li><li>Reduce rake time by 55%</li></ul><p>Thanks for reading</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=https://amree.github.io/2020/11/23/integrate-tradingviews-html5-charting-library-with-ruby-on-rails-v6/><span class=button__text>Integrate TradingView's HTML5 Charting Library with Ruby on Rails v6</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2021 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://amree.github.io/assets/main.js></script><script src=https://amree.github.io/assets/prism.js></script></div></body></html>