<!doctype html><html lang=en><head><title>Rails 6 with Bootstrap (Webpacker for JS, Asset Pipeline for CSS) :: Amree Zaid</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="I haven&amp;rsquo;t really worked on Rails for a while so I decided to take a sneak peek on what&amp;rsquo;s going in Ruby on Rails land.
The first thing I want to try is to integrate Rails with Bootstrap. It seems like a lot of tutorials are focusing on how to use webpack for CSS and JS.
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://amree.github.io/posts/rails-6-with-bootstrap-webpacker-for-js-asset-pipeline-for-css/><link rel=stylesheet href=https://amree.github.io/assets/style.css><link rel=stylesheet href=https://amree.github.io/assets/green.css><link rel=apple-touch-icon href=https://amree.github.io/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=https://amree.github.io/img/favicon/green.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Rails 6 with Bootstrap (Webpacker for JS, Asset Pipeline for CSS)"><meta property="og:description" content="I haven&amp;rsquo;t really worked on Rails for a while so I decided to take a sneak peek on what&amp;rsquo;s going in Ruby on Rails land.
The first thing I want to try is to integrate Rails with Bootstrap. It seems like a lot of tutorials are focusing on how to use webpack for CSS and JS.
"><meta property="og:url" content="https://amree.github.io/posts/rails-6-with-bootstrap-webpacker-for-js-asset-pipeline-for-css/"><meta property="og:site_name" content="Amree Zaid"><meta property="og:image" content="https://amree.github.io/img/favicon/green.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2020-02-02 00:00:00 +0000 UTC"></head><body class=green><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Amree Zaid</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=https://twitter.com/AmreeZaid>Twitter</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=https://twitter.com/AmreeZaid>Twitter</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://amree.github.io/posts/rails-6-with-bootstrap-webpacker-for-js-asset-pipeline-for-css/>Rails 6 with Bootstrap (Webpacker for JS, Asset Pipeline for CSS)</a></h1><div class=post-meta><span class=post-date>2020-02-02</span></div><span class=post-tags>#<a href=https://amree.github.io/tags/ruby/>ruby</a>&nbsp;
#<a href=https://amree.github.io/tags/css/>css</a>&nbsp;
#<a href=https://amree.github.io/tags/js/>js</a>&nbsp;</span><div class=post-content><div><p>I haven&rsquo;t really worked on Rails for a while so I decided to take a sneak peek
on what&rsquo;s going in Ruby on Rails land.</p><p>The first thing I want to try is to integrate Rails with Bootstrap. It seems
like a lot of tutorials are focusing on how to use webpack for CSS and JS.</p><p>But for this article, I&rsquo;m going to try Bootstrap&rsquo;s integration with Rails with
the asset pipeline for the CSS and webpack for the JavaScript. A snippet from
webpacker&rsquo;s README:</p><blockquote><p>Webpacker makes it easy to use the JavaScript pre-processor and bundler
webpack 4.x.x+ to manage application-like JavaScript in Rails. It coexists with
the asset pipeline, as the primary purpose for webpack is app-like JavaScript,
not images, CSS, or even JavaScript Sprinkles (that all continues to live in
app/assets).</p></blockquote><blockquote><p>However, it is possible to use Webpacker for CSS, images and fonts assets as
well, in which case you may not even need the asset pipeline. This is mostly
relevant when exclusively using component-based JavaScript frameworks.</p></blockquote><p>Let&rsquo;s start by creating new rails app first:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>rails new random_app
</code></pre></div><p>Make sure we can see the welcome page first</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>rails db:prepare
rails s
</code></pre></div><p>Open <a href=https://localhost:3000>https://localhost:3000</a> and verify that you can
see the Rails famous welcome page.</p><p>Add bootstrap package and its dependencies:</p><pre><code>yarn add bootstrap jquery popper.js
</code></pre><p>From the <a href=https://getbootstrap.com/docs/4.4/getting-started/javascript/#dependencies>Bootstrap&rsquo;s documentation</a></p><blockquote><p>Also note that all plugins depend on jQuery (this means jQuery must be
included before the plugin files). Consult our package.json to see which
versions of jQuery are supported. Our dropdowns, popovers and tooltips also
depend on Popper.js.</p></blockquote><p>Alright, we have all of the required packages installed so the next step would
be loading them.</p><p>But before we do that, we need to have a page that will confirm all the setup is
correct once we&rsquo;ve done with all of these.</p><p>Create a controller with a view:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>rails g controller Home index
</code></pre></div><p>Let&rsquo;s put some Bootstrap&rsquo;s related code in there so that we can test the
JavaScript and CSS is actually working.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html># app/views/home/index.html.erb
&lt;<span style=color:#f92672>h1</span>&gt;Home#index&lt;/<span style=color:#f92672>h1</span>&gt;
&lt;<span style=color:#f92672>p</span>&gt;Find me in app/views/home/index.html.erb&lt;/<span style=color:#f92672>p</span>&gt;

&lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn btn-secondary&#34;</span> <span style=color:#a6e22e>data-toggle</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;tooltip&#34;</span> <span style=color:#a6e22e>data-placement</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;top&#34;</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Tooltip on top&#34;</span>&gt;
Tooltip on top
&lt;/<span style=color:#f92672>button</span>&gt;
</code></pre></div><p>It doesn&rsquo;t work right now but making it works will be our target.</p><p>Next, we&rsquo;ll take a look at <code>app/assets/stylesheets/application.css</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=color:#75715e>/*
</span><span style=color:#75715e> * ...
</span><span style=color:#75715e> *
</span><span style=color:#75715e> *= require_tree .
</span><span style=color:#75715e> *= require_self
</span><span style=color:#75715e> */</span>

</code></pre></div><p><code>require_tree</code> means it&rsquo;ll load everything insider <code>app/assets/stylesheets</code> and
it sub directories as well. <code>require_self</code> will load anything we defined in
<code>application.scss</code> at the bottom of the output file (as it&rsquo;s declared in the
last line).</p><p>From <a href=https://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives>Ruby on Rails Guides</a></p><blockquote><p>In this example, require_self is used. This puts the CSS contained within the
file (if any) at the precise location of the require_self call.</p></blockquote><blockquote><p>If you want to use multiple Sass files, you should generally use the Sass
@import rule instead of these Sprockets directives. When using Sprockets
directives, Sass files exist within their own scope, making variables or mixins
only available within the document they were defined in.</p></blockquote><p>Depending on what you (or your team) are comfortable with, but I prefer to
explicitly specify my files.</p><p>So, I&rsquo;ll change <code>application.css</code> to a SCSS file so that I can use <code>@import</code>
directive:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mv app/assets/stylesheets/application.css app/assets/stylesheets/application.scss
</code></pre></div><p>Change the content to:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap&#39;</span>;
</code></pre></div><p>Create a new file at <code>app/assets/stylesheets/bootstrap.scss</code> and update the file
with:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/bootstrap&#39;</span>;

</code></pre></div><p>Reload our <code>Home#index</code> and you&rsquo;ll see that Bootstrap&rsquo;s styles have been loaded
correctly. However, the tooltip is not working yet. That&rsquo;s the JavaScript part.</p><p>Optional: You might be wondering why I didn&rsquo;t just do <code>@import</code> in the
<code>application.scss</code> itself. Well, the main reason is that I want to customize
which part of Bootstrap I want to use. This will help in terms of file size
later. But current code will still load everything, so, let&rsquo;s change it to:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=color:#75715e>// Required
</span><span style=color:#75715e></span><span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/functions&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/variables&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/mixins&#39;</span>;

<span style=color:#75715e>// Optional
</span><span style=color:#75715e></span><span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/root&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/reboot&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/type&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/images&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/code&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/grid&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/tables&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/forms&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/buttons&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/transitions&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/dropdown&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/button-group&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/input-group&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/custom-forms&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/nav&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/navbar&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/card&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/breadcrumb&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/pagination&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/badge&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/jumbotron&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/alert&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/progress&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/media&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/list-group&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/close&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/toasts&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/modal&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/tooltip&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/popover&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/carousel&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/spinners&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/utilities&#39;</span>;
<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#39;bootstrap/scss/print&#39;</span>;
</code></pre></div><p>This is based on what we have in the original
<a href=https://github.com/twbs/bootstrap/blob/v4.4.1/scss/bootstrap.scss>bootstrap.scss</a>.
One of the downside with this approach is that you need to check if this file
changed whenever you upgrade Bootstrap as it&rsquo;s like using a private method 😁</p><p>Our Bootstrap&rsquo;s stylesheet is working as expected so the next step would be
getting the JavaScript to work and for this tutorial, we&rsquo;re going to focus on
the tooltip part.</p><p>Let&rsquo;s import Bootstrap&rsquo;s JS files:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#75715e>// app/javascript/packs/application.js
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;bootstrap&#34;</span>
</code></pre></div><p>We&rsquo;ll initialize tooltip by adding these code at the end of the file:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>function</span> () {
<span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;[data-toggle=&#34;tooltip&#34;]&#39;</span>).<span style=color:#a6e22e>tooltip</span>()
})
</code></pre></div><p>In our intialization, we&rsquo;re using <code>$</code> for <code>jQuery</code> so we need to make it
available globally. We can use these to automatically load the modules instead
of <code>import</code> or <code>require</code> them:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#75715e>// config/webpack/environment.js
</span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>environment</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;@rails/webpacker&#39;</span>)
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>webpack</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;webpack&#39;</span>)

<span style=color:#a6e22e>environment</span>.<span style=color:#a6e22e>plugins</span>.<span style=color:#a6e22e>append</span>(<span style=color:#e6db74>&#39;Provide&#39;</span>, <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>webpack</span>.<span style=color:#a6e22e>ProvidePlugin</span>({
<span style=color:#a6e22e>$</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;jquery&#39;</span>,
}))

<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>environment</span>
</code></pre></div><p>Refresh your <code>Home#index</code> and you should be able to see the tooltip when you
hover on the button.</p><p>Optional: If you want to specify which JS component that you want to load, you
can use these steps:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#75715e>// app/javascript/packs/application.js
</span><span style=color:#75715e></span>
<span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;./bootstrap&#34;</span>)

</code></pre></div><p>and</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#75715e>// app/javascript/packs/bootstrap/index.js
</span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;bootstrap/js/src/alert&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;bootstrap/js/src/button&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;bootstrap/js/src/carousel&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;bootstrap/js/src/collapse&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;bootstrap/js/src/dropdown&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;bootstrap/js/src/modal&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;bootstrap/js/src/popover&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;bootstrap/js/src/scrollspy&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;bootstrap/js/src/tab&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;bootstrap/js/src/toast&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;bootstrap/js/src/tooltip&#34;</span>

<span style=color:#75715e>// Tooltip/Other components initialization here
</span></code></pre></div><p>And for our tutorial, we just use the last line which is <code>tooltip</code> and comment
out everything else. It&rsquo;ll reduce the size of the final JS (not much different
though).</p><p>💡 Tip: You can inspect your bundle size by running this command and then upload
the output to <a href=https://chrisbateman.github.io/webpack-visualizer/>Webpack
Visualizer</a></p><pre><code>./bin/webpack --profile --json &gt; webpack-stats.json
</code></pre><p>💡 Tip: You&rsquo;ll notice that your JS will only compile the new changes when you
refresh the page and that might cause some delay. If we want webpack to compile
immediately when we made some changes, we can run this command to monitor the
changes and compile them:</p><pre><code>./bin/webpack-dev-server
</code></pre><p>💡 Tip: You can override Bootstrap&rsquo;s default value or in other word, you can
create your own theme by specifying the variable value before you import
Bootstrap&rsquo;s files. So, it can be something similar to this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss>$primary<span style=color:#f92672>:</span> <span style=color:#66d9ef>green</span>;
$secondary<span style=color:#f92672>:</span> <span style=color:#66d9ef>pink</span>;

<span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#34;bootstrap&#34;</span>;
</code></pre></div><p>Checkout this <a href=https://github.com/twbs/bootstrap/blob/master/scss/_variables.scss>variables list</a> and
you can find more info at <a href=https://getbootstrap.com/docs/4.1/getting-started/theming/#theme-colors>Bootstrap&rsquo;s Documentation</a>.
There&rsquo;re lots more that you can actually do.</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://amree.github.io/posts/order-update-with-two-step-payment/><span class=button__icon>←</span>
<span class=button__text>Order Update with Two-Step Payment</span></a></span>
<span class="button next"><a href=https://amree.github.io/posts/make-telegram-bot-private/><span class=button__text>Trick to Make Telegram Bot Private</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2021 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://amree.github.io/assets/main.js></script><script src=https://amree.github.io/assets/prism.js></script></div></body></html>